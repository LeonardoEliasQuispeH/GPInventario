

                    <!-- Columna Estado: toggle switch centrado -->
                    <td class="text-center">
                        <div class="form-check form-switch d-flex justify-content-center align-items-center m-0">
                            <input class="form-check-input" type="checkbox"
                                   th:checked="${usuario.estado == 'Activo'}"
                                   th:id="'switch-' + ${usuario.id}"
                                   th:data-id="${usuario.id}">
                            <label class="form-check-label ms-2 mb-0" th:for="'switch-' + ${usuario.id}"
                                   th:text="${usuario.estado}"></label>
                        </div>
                    </td>

                    <!-- Columna Acciones -->
                    <td class="text-center">
                        <!-- Editar -->
                        <a th:href="@{'/usuarios/editar/' + ${usuario.id}}" class="text-primary me-2" title="Editar">
                            <i class="bi bi-pencil-fill"></i>
                        </a>

                        <!-- Reestablecer contraseña -->
                        <a th:href="@{'/usuarios/reestablecer/' + ${usuario.id}}" class="text-warning me-2" title="Reestablecer contraseña">
                            <i class="bi bi-key-fill"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.querySelectorAll('.form-check-input').forEach(switchEl => {
    switchEl.addEventListener('change', function() {
        const id = this.getAttribute('data-id');
        const activo = this.checked;

        fetch(`/usuarios/cambiar-estado/${id}?activo=${activo}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            }
        })
        .then(() => location.reload()) // recarga la página para actualizar mensajes
        .catch(() => alert("Error al actualizar el estado del usuario."));
    });
});
</script>

</body>
</html>
